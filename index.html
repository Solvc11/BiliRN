<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BiliRN AAP 2022</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: #f4f7fb;
    padding: 20px;
}
.app {
    max-width: 430px;
    margin: auto;
    background: #fff;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
h1 {
    text-align: center;
    color: #f4b400;
}
label {
    font-weight: bold;
    margin-top: 14px;
    display: block;
}
input[type="number"] {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    font-size: 16px;
    border-radius: 8px;
    border: 1px solid #ccc;
}
.factores label {
    font-weight: normal;
    margin-top: 6px;
}
button {
    width: 100%;
    padding: 14px;
    margin-top: 20px;
    font-size: 18px;
    background: #4285f4;
    color: #fff;
    border: none;
    border-radius: 12px;
    cursor: pointer;
}
.resultado {
    margin-top: 20px;
    padding: 16px;
    border-radius: 12px;
    text-align: center;
    font-size: 18px;
    display: none;
}
.verde { background: #e6f4ea; color: #137333; }
.amarillo { background: #fef7e0; color: #b26a00; }
.rojo { background: #fce8e6; color: #a50e0e; }
.nota {
    font-size: 12px;
    color: #666;
    text-align: center;
    margin-top: 14px;
}
</style>
</head>

<body>

<div class="app">
<h1>ðŸŸ¡ BiliRN</h1>

<label>Edad gestacional (semanas)</label>
<input type="number" id="eg" placeholder="Ej: 38">

<label>Horas de vida</label>
<input type="number" id="horas" placeholder="Ej: 36">

<label>Bilirrubina total (mg/dL)</label>
<input type="number" step="0.1" id="bili" placeholder="Ej: 12.5">

<label>Factores de riesgo</label>
<div class="factores">
<label><input type="checkbox" id="prematuro"> Prematuro</label>
<label><input type="checkbox" id="grupo"> Incompatibilidad de grupo / hemÃ³lisis</label>
<label><input type="checkbox" id="peso"> Descenso excesivo de peso</label>
<label><input type="checkbox" id="hipo"> HipoalimentaciÃ³n</label>
</div>

<button onclick="calcular()">CALCULAR</button>

<div id="resultado" class="resultado"></div>

<div class="nota">
GuÃ­a AAP 2022 Â· Herramienta de apoyo clÃ­nico
</div>
</div>

<script>
// Umbrales SIMPLIFICADOS AAP 2022 (fototerapia)
// Valores aproximados por tramo horario
function umbralAAP(eg, horas, riesgo) {

    // â‰¥38 semanas
    if (eg >= 38) {
        if (horas < 24) return riesgo ? 10 : 12;
        if (horas < 48) return riesgo ? 13 : 15;
        if (horas < 72) return riesgo ? 15 : 18;
        return riesgo ? 17 : 20;
    }

    // 35â€“37 semanas
    if (eg >= 35) {
        if (horas < 24) return riesgo ? 8 : 10;
        if (horas < 48) return riesgo ? 11 : 13;
        if (horas < 72) return riesgo ? 13 : 15;
        return riesgo ? 15 : 17;
    }

    return null; // fuera de rango AAP 2022
}

function calcular() {
    const eg = parseInt(document.getElementById("eg").value);
    const horas = parseInt(document.getElementById("horas").value);
    const bili = parseFloat(document.getElementById("bili").value);
    const res = document.getElementById("resultado");

    if (isNaN(eg) || isNaN(horas) || isNaN(bili)) {
        alert("Completa todos los campos");
        return;
    }

    const riesgo =
        document.getElementById("prematuro").checked ||
        document.getElementById("grupo").checked ||
        document.getElementById("peso").checked ||
        document.getElementById("hipo").checked;

    const umbral = umbralAAP(eg, horas, riesgo);

    res.style.display = "block";

    if (umbral === null) {
        res.className = "resultado amarillo";
        res.innerHTML = "Fuera de rango AAP 2022<br>Evaluar individualmente";
        return;
    }

    if (bili < umbral - 2) {
        res.className = "resultado verde";
        res.innerHTML = "ðŸŸ¢ Bajo umbral<br>Control clÃ­nico";
    } 
    else if (bili >= umbral - 2 && bili < umbral) {
        res.className = "resultado amarillo";
        res.innerHTML = "ðŸŸ¡ Cercano a umbral<br>Repetir bilirrubina";
    } 
    else {
        res.className = "resultado rojo";
        res.innerHTML = "ðŸ”´ Sobre umbral AAP 2022<br>Indicar fototerapia";
    }
}
</script>

</body>
</html>